@model EventManagement.UI.Models.DTOs.CreateEventDto
@{
    ViewData["Title"] = "Yeni Etkinlik Oluştur";
    Layout = "_Layout";
}

<div class="container mt-4">
    <div class="row">
        <div class="col-md-8 mx-auto">
            <div class="card shadow">
                <div class="card-header bg-primary text-white">
                    <h4 class="card-title mb-0">Yeni Etkinlik Oluştur</h4>
                </div>
                <div class="card-body">
                    <form asp-action="Create" method="post">
                        <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                        
                        <div class="mb-3">
                            <label asp-for="Title" class="form-label">Başlık</label>
                            <input asp-for="Title" class="form-control" />
                            <span asp-validation-for="Title" class="text-danger"></span>
                        </div>
                        
                        <div class="mb-3">
                            <label asp-for="Description" class="form-label">Açıklama</label>
                            <textarea asp-for="Description" class="form-control" rows="5"></textarea>
                            <span asp-validation-for="Description" class="text-danger"></span>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label asp-for="StartDate" class="form-label">Başlangıç Tarihi</label>
                                <input asp-for="StartDate" class="form-control" type="datetime-local" />
                                <span asp-validation-for="StartDate" class="text-danger"></span>
                            </div>
                            <div class="col-md-6">
                                <label asp-for="EndDate" class="form-label">Bitiş Tarihi</label>
                                <input asp-for="EndDate" class="form-control" type="datetime-local" />
                                <span asp-validation-for="EndDate" class="text-danger"></span>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label asp-for="Location" class="form-label">Konum</label>
                            <input asp-for="Location" class="form-control" />
                            <span asp-validation-for="Location" class="text-danger"></span>
                        </div>
                        
                        <div class="mb-3">
                            <label asp-for="Capacity" class="form-label">Kapasite</label>
                            <input asp-for="Capacity" class="form-control" type="number" min="1" />
                            <span asp-validation-for="Capacity" class="text-danger"></span>
                            <div class="form-text">Etkinliğe katılabilecek maksimum kişi sayısı</div>
                        </div>
                        
                        <div class="mb-3 form-check">
                            <input asp-for="IsActive" class="form-check-input" />
                            <label asp-for="IsActive" class="form-check-label">Aktif</label>
                            <span asp-validation-for="IsActive" class="text-danger"></span>
                            <div class="form-text">Etkinliğin hemen yayınlanmasını istiyorsanız işaretleyin</div>
                        </div>
                        
                        <div class="d-flex justify-content-between mt-4">
                            <a asp-controller="Admin" asp-action="Events" class="btn btn-outline-secondary">İptal</a>
                            <button type="submit" class="btn btn-primary">Oluştur</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        // Tarihleri varsayılan olarak ayarla
        document.addEventListener('DOMContentLoaded', function() {
            const startDateInput = document.querySelector('input[name="StartDate"]');
            const endDateInput = document.querySelector('input[name="EndDate"]');
            
            // DateTime.Now.Date.AddDays(1) varsayılan değerini JS tarafında da ayarlayalım
            if (startDateInput && !startDateInput.value) {
                const tomorrow = new Date();
                tomorrow.setDate(tomorrow.getDate() + 1);
                tomorrow.setHours(9, 0, 0);
                
                startDateInput.value = formatDateTime(tomorrow);
            }
            
            // DateTime.Now.Date.AddDays(1).AddHours(1) varsayılan değerini JS tarafında da ayarlayalım
            if (endDateInput && !endDateInput.value) {
                const tomorrowPlusHour = new Date();
                tomorrowPlusHour.setDate(tomorrowPlusHour.getDate() + 1);
                tomorrowPlusHour.setHours(10, 0, 0);
                
                endDateInput.value = formatDateTime(tomorrowPlusHour);
            }
        });
        
        // YYYY-MM-DDThh:mm formatını oluşturur
        function formatDateTime(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            const hours = String(date.getHours()).padStart(2, '0');
            const minutes = String(date.getMinutes()).padStart(2, '0');
            
            return `${year}-${month}-${day}T${hours}:${minutes}`;
        }
    </script>
} 